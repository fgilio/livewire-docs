{
    "slug": "uploads",
    "title": "File Uploads",
    "description": "Livewire offers powerful support for uploading files within your components.",
    "category": "features",
    "url": "https://livewire.laravel.com/docs/3.x/uploads",
    "sections": [
        {
            "title": "#Storing uploaded files",
            "content": "The previous example demonstrates the most basic storage scenario: moving the temporarily uploaded file to the \"photos\" directory on the application's default filesystem disk.\nHowever, you may want to customize the file name of the stored file or even specify a specific storage \"disk\" to keep the file on (such as S3).\nYou can access the original file name of a temporary upload, by calling its ->getClientOriginalName() method.\nLivewire honors the same APIs Laravel uses for storing uploaded files, so feel free to consult Laravel's file upload documentation. However, below are a few common storage scenarios and examples:",
            "examples": [
                {
                    "code": "public function save(){ // Store the file in the \"photos\" directory of the default filesystem disk $this->photo->store(path: 'photos');  // Store the file in the \"photos\" directory in a configured \"s3\" disk $this->photo->store(path: 'photos', options: 's3');  // Store the file in the \"photos\" directory with the filename \"avatar.png\" $this->photo->storeAs(path: 'photos', name: 'avatar');  // Store the file in the \"photos\" directory in a configured \"s3\" disk with the filename \"avatar.png\" $this->photo->storeAs(path: 'photos', name: 'avatar', options: 's3');  // Store the file in the \"photos\" directory, with \"public\" visibility in a configured \"s3\" disk $this->photo->storePublicly(path: 'photos', options: 's3');  // Store the file in the \"photos\" directory, with the name \"avatar.png\", with \"public\" visibility in a configured \"s3\" disk $this->photo->storePubliclyAs(path: 'photos', name: 'avatar', options: 's3');}",
                    "type": "class"
                }
            ]
        },
        {
            "title": "#Handling multiple files",
            "content": "Livewire automatically handles multiple file uploads by detecting the multiple attribute on the <input> tag.\nFor example, below is a component with an array property named $photos. By adding multiple to the form's file input, Livewire will automatically append new files to this array:",
            "examples": [
                {
                    "code": "use Livewire\\Component;use Livewire\\WithFileUploads;use Livewire\\Attributes\\Validate; class UploadPhotos extends Component{ use WithFileUploads;  #[Validate(['photos.*' => 'image|max:1024'])] public $photos = [];  public function save() { foreach ($this->photos as $photo) { $photo->store(path: 'photos'); } }}",
                    "type": "class"
                },
                {
                    "code": "<form wire:submit=\"save\"> <input type=\"file\" wire:model=\"photos\" multiple>  @error('photos.*') <span class=\"error\">{{ $message }}</span> @enderror  <button type=\"submit\">Save photo</button></form>",
                    "type": "class"
                }
            ]
        },
        {
            "title": "#File validation",
            "content": "Like we've discussed, validating file uploads with Livewire is the same as handling file uploads from a standard Laravel controller.\nMany of the validation rules relating to files require access to the file. When uploading directly to S3, these validation rules will fail if the S3 file object is not publicly accessible.\nFor more information on file validation, consult Laravel's file validation documentation.",
            "examples": []
        },
        {
            "title": "#Temporary preview URLs",
            "content": "After a user chooses a file, you should typically show them a preview of that file before they submit the form and store the file.\nLivewire makes this trivial by using the ->temporaryUrl() method on uploaded files.\nFor security reasons, temporary preview URLs are only supported on files with image MIME types.\nLet's explore an example of a file upload with an image preview:\nAs previously discussed, Livewire stores temporary files in a non-public directory; therefore, typically there's no simple way to expose a temporary, public URL to your users for image previewing.\nHowever, Livewire solves this issue by providing a temporary, signed URL that pretends to be the uploaded image so your page can show an image preview to your users.\nThis URL is protected against showing files in directories above the temporary directory. And, because it's signed, users can't abuse this URL to preview other files on your system.\nIf you've configured Livewire to use S3 for temporary file storage, calling ->temporaryUrl() will generate a temporary, signed URL to S3 directly so that image previews aren't loaded from your Laravel application server.",
            "examples": [
                {
                    "code": "use Livewire\\Component;use Livewire\\WithFileUploads;use Livewire\\Attributes\\Validate; class UploadPhoto extends Component{ use WithFileUploads;  #[Validate('image|max:1024')] public $photo;  // ...}",
                    "type": "class"
                },
                {
                    "code": "<form wire:submit=\"save\"> @if ($photo) <img src=\"{{ $photo->temporaryUrl() }}\"> @endif  <input type=\"file\" wire:model=\"photo\">  @error('photo') <span class=\"error\">{{ $message }}</span> @enderror  <button type=\"submit\">Save photo</button></form>",
                    "type": "class"
                }
            ]
        },
        {
            "title": "#Testing file uploads",
            "content": "You can use Laravel's existing file upload testing helpers to test file uploads.\nBelow is a complete example of testing the UploadPhoto component with Livewire:\nBelow is an example of the UploadPhoto component required to make the previous test pass:\nFor more information on testing file uploads, please consult Laravel's file upload testing documentation.",
            "examples": [
                {
                    "code": "<?php namespace Tests\\Feature\\Livewire; use Illuminate\\Http\\UploadedFile;use Illuminate\\Support\\Facades\\Storage;use App\\Livewire\\UploadPhoto;use Livewire\\Livewire;use Tests\\TestCase; class UploadPhotoTest extends TestCase{ public function test_can_upload_photo() { Storage::fake('avatars');  $file = UploadedFile::fake()->image('avatar.png');  Livewire::test(UploadPhoto::class) ->set('photo', $file) ->call('upload', 'uploaded-avatar.png');  Storage::disk('avatars')->assertExists('uploaded-avatar.png'); }}",
                    "type": "class"
                },
                {
                    "code": "use Livewire\\Component;use Livewire\\WithFileUploads; class UploadPhoto extends Component{ use WithFileUploads;  public $photo;  public function upload($name) { $this->photo->storeAs('/', $name, disk: 'avatars'); }  // ...}",
                    "type": "class"
                }
            ]
        },
        {
            "title": "#Uploading directly to Amazon S3",
            "content": "As previously discussed, Livewire stores all file uploads in a temporary directory until the developer permanently stores the file.\nBy default, Livewire uses the default filesystem disk configuration (usually local) and stores the files within a livewire-tmp/ directory.\nConsequently, file uploads are always utilizing your application server, even if you choose to store the uploaded files in an S3 bucket later.\nIf you wish to bypass your application server and instead store Livewire's temporary uploads in an S3 bucket, you can configure that behavior in your application's config/livewire.php configuration file. First, set livewire.temporary_file_upload.disk to s3 (or another custom disk that uses the s3 driver):\nNow, when a user uploads a file, the file will never actually be stored on your server. Instead, it will be uploaded directly to your S3 bucket within the livewire-tmp/ sub-directory.\nBefore customizing the file upload disk, you must first publish Livewire's configuration file to your application's /config directory by running the following command:\nLivewire's temporary upload directory will fill up with files quickly; therefore, it's essential to configure S3 to clean up files older than 24 hours.\nTo configure this behavior, run the following Artisan command from the environment that is utilizing an S3 bucket for file uploads:\nNow, any temporary files older than 24 hours will be cleaned up by S3 automatically.\nIf you are not using S3 for file storage, Livewire will handle file cleanup automatically and there is no need to run the command above.",
            "examples": [
                {
                    "code": "return [ // ... 'temporary_file_upload' => [ 'disk' => 's3', // ... ],];",
                    "type": "class"
                },
                {
                    "code": "php artisan livewire:publish --config",
                    "type": "class"
                },
                {
                    "code": "php artisan livewire:configure-s3-upload-cleanup",
                    "type": "class"
                }
            ]
        },
        {
            "title": "#Loading indicators",
            "content": "Although wire:model for file uploads works differently than other wire:model input types under the hood, the interface for showing loading indicators remains the same.\nYou can display a loading indicator scoped to the file upload like so:\nNow, while the file is uploading, the \"Uploading...\" message will be shown and then hidden when the upload is finished.\nFor more information on loading states, check out our comprehensive loading state documentation.",
            "examples": [
                {
                    "code": "<input type=\"file\" wire:model=\"photo\"> <div wire:loading wire:target=\"photo\">Uploading...</div>",
                    "type": "class"
                }
            ]
        },
        {
            "title": "#Progress indicators",
            "content": "Every Livewire file upload operation dispatches JavaScript events on the corresponding <input> element, allowing custom JavaScript to intercept the events:\nBelow is an example of wrapping a Livewire file upload in an Alpine component to display an upload progress bar:",
            "examples": [
                {
                    "code": "<form wire:submit=\"save\"> <div x-data=\"{ uploading: false, progress: 0 }\" x-on:livewire-upload-start=\"uploading = true\" x-on:livewire-upload-finish=\"uploading = false\" x-on:livewire-upload-cancel=\"uploading = false\" x-on:livewire-upload-error=\"uploading = false\" x-on:livewire-upload-progress=\"progress = $event.detail.progress\" > <!-- File Input --> <input type=\"file\" wire:model=\"photo\">  <!-- Progress Bar --> <div x-show=\"uploading\"> <progress max=\"100\" x-bind:value=\"progress\"></progress> </div> </div>  <!-- ... --></form>",
                    "type": "class"
                }
            ]
        },
        {
            "title": "#Cancelling an upload",
            "content": "If an upload is taking a long time, a user may want to cancel it. You can provide this functionality with Livewire's $cancelUpload() function in JavaScript.\nHere's an example of creating a \"Cancel Upload\" button in a Livewire component using wire:click to handle the click event:\nWhen \"Cancel upload\" is pressed, the file upload will request will be aborted and the file input will be cleared. The user can now attempt another upload with a different file.\nAlternatively, you can call cancelUpload(...) from Alpine like so:",
            "examples": [
                {
                    "code": "<form wire:submit=\"save\"> <!-- File Input --> <input type=\"file\" wire:model=\"photo\">  <!-- Cancel upload button --> <button type=\"button\" wire:click=\"$cancelUpload('photo')\">Cancel Upload</button>  <!-- ... --></form>",
                    "type": "class"
                },
                {
                    "code": "<button type=\"button\" x-on:click=\"$wire.cancelUpload('photo')\">Cancel Upload</button>",
                    "type": "class"
                }
            ]
        },
        {
            "title": "#JavaScript upload API",
            "content": "Integrating with third-party file-uploading libraries often requires more control than a simple <input type=\"file\" wire:model=\"...\"> element.\nFor these scenarios, Livewire exposes dedicated JavaScript functions.\nThese functions exist on a JavaScript component object, which can be accessed using Livewire's convenient $wire object from within your Livewire component's template:",
            "examples": [
                {
                    "code": "@script<script> let file = $wire.el.querySelector('input[type=\"file\"]').files[0]  // Upload a file... $wire.upload('photo', file, (uploadedFilename) => { // Success callback... }, () => { // Error callback... }, (event) => { // Progress callback... // event.detail.progress contains a number between 1 and 100 as the upload progresses }, () => { // Cancelled callback... })  // Upload multiple files... $wire.uploadMultiple('photos', [file], successCallback, errorCallback, progressCallback, cancelledCallback)  // Remove single file from multiple uploaded files... $wire.removeUpload('photos', uploadedFilename, successCallback)  // Cancel an upload... $wire.cancelUpload('photos')</script>@endscript",
                    "type": "class"
                }
            ]
        },
        {
            "title": "#Configuration",
            "content": "Because Livewire stores all file uploads temporarily before the developer can validate or store them, it assumes some default handling behavior for all file uploads.\nBy default, Livewire will validate all temporary file uploads with the following rules: file|max:12288 (Must be a file less than 12MB).\nIf you wish to customize these rules, you can do so inside your application's config/livewire.php file:\nThe temporary file upload endpoint is assigned a throttling middleware by default. You can customize exactly what middleware this endpoint uses via the following configuration option:\nTemporary files are uploaded to the specified disk's livewire-tmp/ directory. You can customize this directory via the following configuration option:",
            "examples": [
                {
                    "code": "'temporary_file_upload' => [ // ... 'rules' => 'file|mimes:png,jpg,pdf|max:102400', // (100MB max, and only accept PNGs, JPEGs, and PDFs)],",
                    "type": "class"
                },
                {
                    "code": "'temporary_file_upload' => [ // ... 'middleware' => 'throttle:5,1', // Only allow 5 uploads per user per minute],",
                    "type": "class"
                },
                {
                    "code": "'temporary_file_upload' => [ // ... 'directory' => 'tmp',],",
                    "type": "class"
                }
            ]
        }
    ],
    "directives_used": [
        "wire:click",
        "wire:configure-s3-upload-cleanup",
        "wire:loading",
        "wire:model",
        "wire:publish",
        "wire:submit",
        "wire:target"
    ],
    "related": [
        "quickstart",
        "installation",
        "upgrading",
        "components",
        "properties",
        "actions",
        "forms",
        "events",
        "lifecycle-hooks",
        "nesting"
    ],
    "scraped_at": "2026-01-02T23:37:17+00:00"
}
